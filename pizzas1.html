<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ü–ï–ü–ï–õ | –î—Ä–æ–≤—è–Ω–∞—è –ø–∏—Ü—Ü–µ—Ä–∏—è</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --bg-color: #0e0e0e; /* FIX: –ø–æ–º–µ–Ω—è–ª–∏ —Ñ–æ–Ω */
      --card-bg: #1c1c1c;
      --text-primary: #e6e6e3;
      --text-secondary: #8f8f8f;
      --accent: #cd3f29;
      --border: #333333;
      --spacing: 20px;
      --radius: 2px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background-color: var(--bg-color);
      color: var(--text-primary);
      font-family: 'Manrope', sans-serif;
      line-height: 1.5;
      overflow-x: hidden;
      position: relative;
    }

    /* Noise Texture Overlay */
    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      background: url('https://grainy-gradients.vercel.app/noise.svg');
      opacity: 0.05;
      z-index: 9999;
    }

    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
      font-weight: 400;
    }

    a { text-decoration: none; color: inherit; }
    button { cursor: pointer; border: none; font-family: inherit; }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 var(--spacing);
    }

    /* Header */
    header {
      padding: 40px 0;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      background: rgba(18, 18, 18, 0.9);
      backdrop-filter: blur(10px);
      z-index: 100;
    }

    .logo {
      font-size: 2rem;
      letter-spacing: -0.05em;
      text-transform: uppercase;
      border: 1px solid var(--text-primary);
      padding: 5px 15px;
      font-weight: 600;
    }

    .cart-trigger {
      position: relative;
      background: transparent;
      color: var(--text-primary);
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .cart-icon{
      font-size: 1.1rem;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transform: translateY(-1px);
    }

    .cart-count {
      background: var(--accent);
      color: #fff;
      font-size: 0.8rem;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-family: 'Manrope';
    }

    /* Hero */
    .hero {
      padding: 80px 0;
      text-align: center;
      border-bottom: 1px solid var(--border);
    }

    .hero h1 {
      font-size: clamp(2.5rem, 5vw, 4.5rem);
      margin-bottom: 20px;
      line-height: 1.1;
    }

    .hero h1 span {
      color: var(--accent);
      font-style: italic;
    }

    .hero p {
      max-width: 600px;
      margin: 0 auto;
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    /* Catalog */
    .catalog { padding: 60px 0; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
    }

    .card {
      background: var(--bg-color);
      padding: 30px;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, background-color 0.3s;
      position: relative;
    }

    .card:hover { background-color: #171717; z-index: 1; }

    .card-image {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      margin-bottom: 20px;
      filter: saturate(0.9) contrast(1.1);
      transition: 0.4s;
      border-radius: var(--radius);
    }

    .card:hover .card-image {
      filter: saturate(1.1) contrast(1.1);
      transform: scale(1.02);
    }

    .badges { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }

    .badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 4px 8px;
      border: 1px solid var(--border);
      color: var(--text-secondary);
    }

    .badge.spicy { border-color: var(--accent); color: var(--accent); }
    .badge.meat { border-color: #8f8f8f; }

    .card h3 { font-size: 1.5rem; margin-bottom: 10px; }

    .card-desc {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
      padding-top: 20px;
      border-top: 1px solid var(--border);
    }

    .price {
      font-size: 1.2rem;
      font-weight: 600;
      font-family: 'Playfair Display', serif;
    }

    .add-btn {
      background: transparent;
      color: var(--text-primary);
      border: 1px solid var(--text-primary);
      padding: 10px 20px;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      transition: 0.2s;
    }

    .add-btn:hover { background: var(--text-primary); color: var(--bg-color); }

    /* Cart Overlay / Sidebar */
    .cart-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .cart-overlay.active { opacity: 1; pointer-events: all; }

    .cart-sidebar {
      position: fixed;
      top: 0; right: 0;
      width: 450px;
      max-width: 100%;
      height: 100%;
      background: #141414;
      border-left: 1px solid var(--border);
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      display: flex;
      flex-direction: column;
      padding: 40px;
    }

    .cart-sidebar.active { transform: translateX(0); }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }

    .close-cart { background: none; color: var(--text-secondary); font-size: 1.5rem; }

    .cart-items { flex-grow: 1; overflow-y: auto; }

    .cart-item {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #222;
    }

    .cart-item img {
      width: 70px; height: 70px;
      object-fit: cover;
      margin-right: 15px;
      border-radius: 2px;
    }

    .cart-item-info { flex-grow: 1; }
    .cart-item-title { font-family: 'Playfair Display'; font-size: 1.1rem; }
    .cart-item-price { color: var(--text-secondary); font-size: 0.9rem; }

    .cart-controls { display: flex; align-items: center; gap: 10px; }

    .qty-btn {
      width: 25px;
      height: 25px;
      background: #222;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cart-qty{
      font-family: 'Manrope';
      font-size: 1rem;
      min-width: 18px;
      text-align: center;
    }

    .cart-footer {
      margin-top: 20px;
      border-top: 1px solid var(--border);
      padding-top: 20px;
    }

    .checkout-form{
      display: grid;
      gap: 10px;
      margin-bottom: 16px;
    }

    .field{
      width: 100%;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 12px 12px;
      font-size: 0.95rem;
      outline: none;
    }

    .field::placeholder { color: var(--text-secondary); }
    .field:focus { border-color: var(--text-primary); }

    .total-row {
      display: flex;
      justify-content: space-between;
      font-size: 1.5rem;
      font-family: 'Playfair Display';
      margin-bottom: 20px;
    }

    .checkout-btn {
      width: 100%;
      background: var(--accent);
      color: #fff;
      padding: 15px;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      transition: 0.3s;
    }

    .checkout-btn:hover { background: #b0301c; }

    /* Map */
    .map-section {
      height: 400px;
      border-top: 1px solid var(--border);
      position: relative;
      background: #1c1c1c;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .map-overlay {
      position: absolute;
      z-index: 2;
      background: rgba(18, 18, 18, 0.8);
      padding: 30px;
      border: 1px solid var(--border);
      text-align: center;
    }

    /* Toast */
    .toast{
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%) translateY(20px);
      background: rgba(20,20,20,0.92);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 12px 14px;
      font-size: 0.95rem;
      letter-spacing: 0.02em;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 2000;
      max-width: min(560px, calc(100vw - 24px));
      text-align: center;
    }

    .toast.visible{
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast b{ color: var(--accent); font-weight: 600; }

    /* Responsive */
    @media (max-width: 768px) {
      header{ padding: 18px 0; } /* FIX: ‚Äú–ø–æ–ª–æ—Å–∫–∞‚Äù/–≤—ã—Å–æ—Ç–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
      .logo{ font-size: 1.4rem; padding: 4px 10px; }
      .cart-trigger{ font-size: 1rem; gap: 8px; letter-spacing: 0.08em; }

      .hero h1 { font-size: 2.5rem; }
      .grid { grid-template-columns: 1fr; }
      .cart-sidebar { width: 100%; padding: 20px; }

      /* FIX: —É–≤–µ–ª–∏—á–∏–ª–∏ +/- –∏ —Ü–∏—Ñ—Ä—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ */
      .qty-btn{ width: 40px; height: 40px; font-size: 1.1rem; }
      .cart-controls{ gap: 12px; }
      .cart-qty{ font-size: 1.15rem; min-width: 24px; }
    }

    /* Animations */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div class="logo">–ü–∏—Ü—Ü–∞ –Ω–∞ –¥—Ä–æ–≤–∞—Ö.</div>
      <button class="cart-trigger" onclick="toggleCart()">
        <span class="cart-icon" aria-hidden="true">üõí</span>
        –ö–æ—Ä–∑–∏–Ω–∞
        <span class="cart-count" id="cartCount">0</span>
      </button>
    </header>

    <section class="hero fade-in">
      <h1>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ò—Ç–∞–ª–∏—è<br><span>–í –°–µ—Ä–¥—Ü–µ –†–æ—Å—Å–∏–∏</span></h1>
      <p>–î—Ä–æ–≤—è–Ω–∞—è –ø–µ—á—å. –ò—Å–ø—ã—Ç–∞–Ω–∏–µ –æ–≥–Ω–µ–º. –¢–µ—Å—Ç–æ 72 —á–∞—Å–æ–≤ —Ñ–µ—Ä–º–µ–Ω—Ç–∞—Ü–∏–∏. –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω–µ —Å—Ç—ã–¥–Ω–æ. –°—Ç—Ä–æ–≥–æ, —á–µ—Å—Ç–Ω–æ, –≤–∫—É—Å–Ω–æ.</p>
    </section>

    <section class="catalog">
      <div class="grid" id="catalogGrid">
        <!-- JS Injection Here -->
      </div>
    </section>
  </div>

  <section class="map-section">
    <!-- –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–∞ (–≤–∏–∑—É–∞–ª—å–Ω–æ —Ç—ë–º–Ω–∞—è —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä) -->
    <iframe
      src="https://yandex.ru/map-widget/v1/?text=%D0%B3.%20%D0%9A%D0%BE%D1%80%D0%BE%D0%BB%D0%B5%D0%B2%2C%20%D1%83%D0%BB.%20%D0%94%D0%B5%D0%BA%D0%B0%D0%B1%D1%80%D0%B8%D1%81%D1%82%D0%BE%D0%B2%2022&z=16"
      width="100%"
      height="100%"
      style="border:0; filter: grayscale(100%) invert(92%) contrast(1.1) brightness(0.85);"
      loading="lazy">
    </iframe>

    <div class="map-overlay fade-in">
      <h3>–ñ–¥–µ–º –≤–∞—Å</h3>
      <p>–≥. –ö–æ—Ä–æ–ª–µ–≤, —É–ª. –î–µ–∫–∞–±—Ä–∏—Å—Ç–æ–≤ 22</p>
      <p style="margin-top: 10px; color: var(--accent);">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 12:00 –¥–æ 23:00</p>
    </div>
  </section>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- Cart Sidebar -->
  <div class="cart-overlay" onclick="closeCart()"></div>

  <div class="cart-sidebar" onclick="event.stopPropagation()">
    <div class="cart-header">
      <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
      <button class="close-cart" onclick="closeCart()">‚úï</button>
    </div>

    <div class="cart-items" id="cartItems">
      <p style="text-align: center; color: var(--text-secondary); margin-top: 50px;">
        –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞, –∫–∞–∫ –ø–µ—á—å —É—Ç—Ä–æ–º.
      </p>
    </div>

    <div class="cart-footer">
      <!-- FIX: –ø–æ–ª—è –ø–µ—Ä–µ–¥ –∏—Ç–æ–≥–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π -->
      <div class="checkout-form">
        <input class="field" type="text" id="custName" placeholder="–ò–º—è" autocomplete="name" />
        <input class="field" type="tel" id="custPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" autocomplete="tel" />
        <input class="field" type="text" id="custAddress" placeholder="–ê–¥—Ä–µ—Å" autocomplete="street-address" />
      </div>

      <div class="total-row">
        <span>–ò—Ç–æ–≥–æ</span>
        <span id="cartTotal">0 ‚ÇΩ</span>
      </div>

      <button class="checkout-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
    </div>
  </div>

  <script>
    // Data
    const products = [
      {
        id: 1,
        title: "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ –ù—É–∞—Ä",
        desc: "–ö–ª–∞—Å—Å–∏–∫–∞. –¢–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å San Marzano, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, –±–∞–∑–∏–ª–∏–∫, –æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ, —á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü.",
        price: 650,
        image: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è"]
      },
      {
        id: 2,
        title: "–î—å—è–≤–æ–ª–æ",
        desc: "–û—Å—Ç—Ä–∞—è —Å–∞–ª—è–º–∏, –ø–µ—Ä–µ—Ü —á–∏–ª–∏, –∫—Ä–∞—Å–Ω—ã–π –ª—É–∫, —Ç–æ–º–∞—Ç–Ω–∞—è –æ—Å–Ω–æ–≤–∞. –ñ–∂–µ—Ç –∫–∞–∫ —Å–æ–≤–µ—Å—Ç—å.",
        price: 820,
        image: "https://images.unsplash.com/photo-1628840042765-356cda07504e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–û—Å—Ç—Ä–∞—è", "–ú—è—Å–æ"]
      },
      {
        id: 3,
        title: "–¢–∞–º–±–æ–≤—Å–∫–∏–π –û–∫–æ—Ä–æ–∫",
        desc: "–°–ª–∏–≤–æ—á–Ω—ã–π —Å–æ—É—Å, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, –ø–µ—á–µ–Ω—ã–π –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, —Ç–∞–º–±–æ–≤—Å–∫–∏–π –æ–∫–æ—Ä–æ–∫, —Ä–æ–∑–º–∞—Ä–∏–Ω.",
        price: 790,
        image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–ú—è—Å–æ", "–ê–≤—Ç–æ—Ä—Å–∫–∞—è"]
      },
      {
        id: 4,
        title: "–ß–µ—Ç—ã—Ä–µ –°—ã—Ä–∞",
        desc: "–ì–æ—Ä–≥–æ–Ω–∑–æ–ª–∞, –º–æ—Ü–∞—Ä–µ–ª–ª–∞, –ø–∞—Ä–º–µ–∑–∞–Ω, —Å–∫–∞–º–æ—Ä—Ü–∞. –ú–µ–¥ –∏ –≥—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö.",
        price: 850,
        image: "https://images.unsplash.com/photo-1573821663912-569905455b1c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è"]
      },
      {
        id: 5,
        title: "–ì—Ä—É—à–∞ –∏ –ì–æ—Ä–≥–æ–Ω–∑–æ–ª–∞",
        desc: "–°–ª–∞–¥–∫–∞—è –≥—Ä—É—à–∞, –ø–∏–∫–∞–Ω—Ç–Ω–∞—è –≥–æ—Ä–≥–æ–Ω–∑–æ–ª–∞, —Å–ª–∏–≤–æ—á–Ω—ã–π —Å–æ—É—Å. –ò–∑—ã—Å–∫–∞–Ω–Ω–æ –∏ —Å—Ç—Ä–æ–≥–æ.",
        price: 750,
        image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–°–ª–∞–¥–∫–∞—è"]
      },
      {
        id: 6,
        title: "–ú—è—Å–Ω–∏–∫",
        desc: "–ë–µ–∫–æ–Ω, –≤–µ—Ç—á–∏–Ω–∞, –ø–µ–ø–ø–µ—Ä–æ–Ω–∏, –æ—Ö–æ—Ç–Ω–∏—á—å–∏ –∫–æ–ª–±–∞—Å–∫–∏, –±–∞—Ä–±–µ–∫—é —Å–æ—É—Å.",
        price: 950,
        image: "https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
        badges: ["–ú—è—Å–æ", "–°—ã—Ç–Ω–∞—è"]
      }
    ];

    let cart = [];

    // Render Logic
    const catalogGrid = document.getElementById('catalogGrid');

    function renderCatalog() {
      catalogGrid.innerHTML = products.map(product => `
        <div class="card fade-in">
          <img src="${product.image}" alt="${product.title}" class="card-image">
          <div class="badges">
            ${product.badges.map(b => {
              let cls = '';
              if (b === '–û—Å—Ç—Ä–∞—è') cls = 'spicy';
              if (b === '–ú—è—Å–æ' || b === '–°—ã—Ç–Ω–∞—è') cls = 'meat';
              return `<span class="badge ${cls}">${b}</span>`;
            }).join('')}
          </div>
          <h3>${product.title}</h3>
          <p class="card-desc">${product.desc}</p>
          <div class="card-footer">
            <span class="price">${product.price} ‚ÇΩ</span>
            <button class="add-btn" onclick="addToCart(${product.id})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
          </div>
        </div>
      `).join('');

      setTimeout(() => observeAnimations(), 100);
    }

    // Toast
    let toastTimer = null;
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.innerHTML = message;
      toast.classList.add('visible');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.remove('visible'), 1800);
    }

    // FIX –∫–æ—Ä–∑–∏–Ω—ã: –¥–µ–ª–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ open/close —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∞ overlay/sidebar
    function openCart() {
      document.querySelector('.cart-sidebar').classList.add('active');
      document.querySelector('.cart-overlay').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCart() {
      document.querySelector('.cart-sidebar').classList.remove('active');
      document.querySelector('.cart-overlay').classList.remove('active');
      document.body.style.overflow = '';
    }

    function toggleCart() {
      const sidebar = document.querySelector('.cart-sidebar');
      if (sidebar.classList.contains('active')) closeCart();
      else openCart();
    }

    // Cart Logic
    function addToCart(id) {
      const product = products.find(p => p.id === id);
      const existing = cart.find(item => item.id === id);

      if (existing) existing.qty++;
      else cart.push({ ...product, qty: 1 });

      updateCartUI();

      // FIX: –±–æ–ª—å—à–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ
      showToast(`–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É: <b>${product.title}</b>`);
    }

    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      updateCartUI();
      if (cart.length === 0) showToast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è.');
    }

    function changeQty(id, delta) {
      const item = cart.find(i => i.id === id);
      if (!item) return;
      item.qty += delta;
      if (item.qty <= 0) removeFromCart(id);
      else updateCartUI();
    }

    function updateCartUI() {
      const cartCount = document.getElementById('cartCount');
      const cartTotal = document.getElementById('cartTotal');
      const cartItems = document.getElementById('cartItems');

      const totalQty = cart.reduce((acc, item) => acc + item.qty, 0);
      const totalPrice = cart.reduce((acc, item) => acc + (item.price * item.qty), 0);

      cartCount.textContent = totalQty;
      cartTotal.textContent = totalPrice + ' ‚ÇΩ';

      if (cart.length === 0) {
        cartItems.innerHTML = `
          <p style="text-align: center; color: var(--text-secondary); margin-top: 50px;">
            –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞, –∫–∞–∫ –ø–µ—á—å —É—Ç—Ä–æ–º.
          </p>`;
        return;
      }

      cartItems.innerHTML = cart.map(item => `
        <div class="cart-item">
          <img src="${item.image}" alt="${item.title}">
          <div class="cart-item-info">
            <div class="cart-item-title">${item.title}</div>
            <div class="cart-item-price">${item.price} ‚ÇΩ</div>
          </div>
          <div class="cart-controls">
            <button class="qty-btn" onclick="changeQty(${item.id}, -1)">-</button>
            <span class="cart-qty">${item.qty}</span>
            <button class="qty-btn" onclick="changeQty(${item.id}, 1)">+</button>
          </div>
        </div>
      `).join('');
    }

    // Checkout
    function checkout() {
      if (cart.length === 0) {
        showToast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è.');
        return;
      }

      const name = document.getElementById('custName').value.trim();
      const phone = document.getElementById('custPhone').value.trim();
      const address = document.getElementById('custAddress').value.trim();

      if (!name || !phone || !address) {
        showToast('–ó–∞–ø–æ–ª–Ω–∏: <b>–∏–º—è</b>, <b>—Ç–µ–ª–µ—Ñ–æ–Ω</b>, <b>–∞–¥—Ä–µ—Å</b>.');
        return;
      }

      alert(`–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω.\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n–ê–¥—Ä–µ—Å: ${address}\n–ñ–¥–∏—Ç–µ –∑–≤–æ–Ω–∫–∞.`);
    }

    // Animations
    function observeAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('visible');
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
    }

    // UX: –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeCart();
    });

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      renderCatalog();
      updateCartUI();
    });
  </script>
</body>
</html>
